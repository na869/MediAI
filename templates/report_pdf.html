<!DOCTYPE html>
<html>
<head>
    <style>
        @page {
            size: a4 portrait;
            @frame header_frame {
                -pdf-frame-content: header_content;
                left: 50pt; width: 512pt; top: 50pt; height: 100pt;
            }
            @frame content_frame {
                left: 50pt; width: 512pt; top: 150pt; height: 632pt;
            }
            @frame footer_frame {
                -pdf-frame-content: footer_content;
                left: 50pt; width: 512pt; top: 782pt; height: 50pt;
            }
        }
        body { font-family: Helvetica, Arial, sans-serif; color: #333; }
        .title { font-size: 24pt; font-weight: bold; color: #2C3E50; margin-bottom: 5pt; }
        .subtitle { font-size: 12pt; color: #7F8C8D; margin-bottom: 20pt; border-bottom: 1px solid #EEE; padding-bottom: 10pt; }
        .section-title { font-size: 14pt; font-weight: bold; color: #2C3E50; background-color: #F8F9FA; padding: 5pt; margin-top: 20pt; }
        .data-row { margin-bottom: 8pt; border-bottom: 0.5px solid #FAFAFA; padding-bottom: 4pt; }
        .label { font-weight: bold; width: 150pt; display: inline-block; color: #7F8C8D; font-size: 10pt; }
        .value { display: inline-block; font-size: 11pt; }
        .result-box { background-color: #EBF5FB; border: 1px solid #AED6F1; padding: 15pt; margin-top: 20pt; border-radius: 5pt; }
        .drug-name { font-size: 20pt; font-weight: bold; color: #2980B9; }
        .footer { font-size: 9pt; color: #BDC3C7; text-align: center; }
    </style>
</head>
<body>
    <div id="header_content">
        <div class="title">MediAI Diagnostic Report</div>
        <div class="subtitle">Clinical Decision Support System | PBR Visvodaya Institute of Technology</div>
    </div>

    <div id="content_frame">
        <div class="section-title">Patient Clinical Profile</div>
        <div class="data-row"><span class="label">Patient Name:</span> <span class="value">{{ pred.patient_name }}</span></div>
        <div class="data-row"><span class="label">Report ID:</span> <span class="value">#{{ pred.id }}</span></div>
        <div class="data-row"><span class="label">Timestamp:</span> <span class="value">{{ pred.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</span></div>
        <div class="data-row"><span class="label">Age / Gender:</span> <span class="value">{{ pred.age }} Years / {{ pred.sex }}</span></div>
        <div class="data-row"><span class="label">Blood Pressure:</span> <span class="value">{{ pred.bp }}</span></div>
        <div class="data-row"><span class="label">Cholesterol:</span> <span class="value">{{ pred.cholesterol }}</span></div>
        <div class="data-row"><span class="label">Na to K Ratio:</span> <span class="value">{{ pred.na_to_k }}</span></div>

        <div class="section-title">Predictive Analysis Results</div>
        <div class="result-box">
            <div style="font-size: 10pt; color: #5D6D7E; margin-bottom: 5pt; text-transform: uppercase;">Primary Drug Recommendation</div>
            <div class="drug-name">{{ pred.predicted_drug }}</div>
            <div style="margin-top: 5pt; font-size: 12pt;">Target Condition: <strong>{{ pred.condition }}</strong></div>
            <div style="margin-top: 10pt; font-size: 10pt; color: #27AE60;">System Confidence: {{ pred.confidence }}%</div>
        </div>

        <div style="margin-top: 30pt; font-size: 10pt; line-height: 1.5;">
            <p><strong>Clinical Logic:</strong> The recommendation was generated by analyzing multivariate physiological markers using a Random Forest classifier. This tool is intended for clinical decision support and should be verified by a medical professional.</p>
        </div>

        <div style="margin-top: 50pt;">
            <div style="border-top: 1px solid #333; width: 200pt; margin-bottom: 5pt;"></div>
            <div style="font-size: 10pt; font-weight: bold;">Authorized Electronic Signature</div>
            <div style="font-size: 9pt; color: #7F8C8D;">MediAI Analytics Engine</div>
        </div>
    </div>

    <div id="footer_content" class="footer">
        Page <pdf:pagenumber> | This report is generated automatically by the MediAI Predictive Analytics System.
    </div>
</body>
</html>